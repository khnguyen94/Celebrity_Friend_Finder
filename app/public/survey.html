<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>

    <!-- Link CSS Reset -->
    <!-- Link Bootstrap CDN -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <!-- Link Custom CSS -->
  </head>

  <body>
    <div class="container">
      <div class="jumbotron">
        <h1>Celebrity Friend Finder</h1>

        <br />

        <form method="POST" role="form">
          <!-- Ask for basic user data -->
          <h3>Tell us a bit about yourself.</h3>

          <div class="form-group">
            <label for="userNameInput">Name</label>
            <input type="text" class="form-control" id="userNameInput" />
          </div>

          <div class="form-group">
            <label for="userEmailInput"> Email Address </label>
            <input
              type="email"
              class="form-control"
              id="userEmailInput"
              aria-describedby="emailHelp"
              placeholder="Enter email"
            />
            <small id="emailHelp" class="form-text text-muted"
              >We'll never share your email with anyone else.</small
            >
          </div>

          <div class="form-group">
            <label for="exampleFormControlTextarea1"
              >Link a profile image
            </label>
            <textarea
              class="form-control"
              id="userImageLinkInput"
              rows="1"
            ></textarea>
          </div>
        </form>

        <br />

        <!-- Ask survey questions -->
        <div class="form-group">
          <h5>Question 1</h5>
          <label for="question1">You are self-asborbed.</label>
          <select class="form-control" id="q1">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 2</h5>
          <label for="question2"
            >You care about your physical appearance.</label
          >
          <select class="form-control" id="q2">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 3</h5>
          <label for="question3"
            >You think you have an impeccable sense of humor.</label
          >
          <select class="form-control" id="q3">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 4</h5>
          <label for="question4">You are entreprenurial.</label>
          <select class="form-control" id="q4">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 5</h5>
          <label for="question5">You are vain.</label>
          <select class="form-control" id="q5">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 6</h5>
          <label for="question6"
            >You spend a lot of time in the limelight.</label
          >
          <select class="form-control" id="q6">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 7</h5>
          <label for="question7"
            >You are humble about your accomplishments.</label
          >
          <select class="form-control" id="q7">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 8</h5>
          <label for="question8">You are musically gifted.</label>
          <select class="form-control" id="q8">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 9</h5>
          <label for="question9"
            >You have a knack for theatre and acting.</label
          >
          <select class="form-control" id="q9">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="form-group">
          <h5>Question 10</h5>
          <label for="question10">Money is everything in life.</label>
          <select class="form-control" id="q10">
            <option value="0">Select</option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <br />

        <!-- Submit button -->
        <div>
          <button
            type="submit"
            id="submit-survey-button"
            class="btn btn-primary btn-lg"
          >
            Submit Survey
          </button>
        </div>
      </div>
    </div>

    <!-- Link JQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
  </body>
</html>

<!-- JS logic to handle submit data -->
<script type="text/javascript">
  // Create on-click logic for submit button
  $("#submit-survey-button").on("click", function(event) {
    // Prevent refresh
    event.preventDefault();

    if (!$(".form-control")) {
      alert("There are empty fields of the form!");
    }
    else {

    // Grabs all the inputs and creates an object using all of these inputs
    // Grab the name of the new Friend
    newFriendName = $("#userNameInput")
      .val()
      .trim();

    // Create a route name from this name for the new Friend
    newFriendRouteName = newFriendName.replace(/\s+/g, "").toLowerCase();

    // Create an empty array to hold new Friend survey answers
    var userSurveyAnswers = [];

    // Use a for loop to push all the user survey question field values to the userScoresArr
    for (var i = 1; i < 11; i++) {
      // Get a jquery handle on the current html form value
      var questionAnswer = $("#q" + i)
        .val()
        .trim();

      // Push value to the userScoresArr
      userSurveyAnswers.push(questionAnswer);
    }

    // Check both score
    // console.log(userSurveyAnswers);

    // Grab the rest of the form elements to be used in creating a new user
    var newFriend = {
      routeName: newFriendRouteName,
      name: newFriendName,
      email: $("#userImageEmailLinkInput")
        .val(),
      photo: $("#userImageLinkInput")
        .val(),
      type: "friend",
      scores: userSurveyAnswers
    };

    console.log(newFriend);

    // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
    // The callback is the response of the server. In our case, we set up code in api-routes that "returns" a match celeb to that new Friend's data
    $.post("/api/survey", newFriend, function(data) {
      //
      // Clear the form after submission
    });
    }

  });
</script>
